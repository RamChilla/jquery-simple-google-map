!function(e,t,n,a){"use strict";function i(t,n){this.element=t,this.$element=e(this.element),n&&n.isApiLoaded&&(e.fn.simpleMap.defaults.isApiLoaded=!0),this._defaults=e.fn.simpleMap.defaults,this.settings=e.extend(!0,{},this._defaults,n),this._name=s,this.init()}var s="simpleMap";e.extend(i.prototype,{init:function(){this.bindEvents(),this.settings.autoLoad&&this.$element.css("position","relative").trigger("click").unbind("click")},loadMapApi:function(){var t=this,n="https://maps.googleapis.com/maps/api/js?key="+t.settings.googleApiKey;e.getScript(n,function(){t.geoCodeAddr()}),e.fn.simpleMap.defaults.isApiLoaded=!0},geoCodeAddr:function(){var t=this,a=t.settings;this.geocoder=new google.maps.Geocoder,this.geocoder.geocode({address:a.theAddress},function(s,i){function o(){var s=e.extend({},{center:t.address,zoom:a.mapSetup.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP},a.mapSetup);a.autoLoad?t.map=new google.maps.Map(t.element,s):t.map=new google.maps.Map(n.getElementById(a.mapElementId),s),t.map.myMarker=new google.maps.Marker({position:t.address,map:t.map,title:a.markerConfig.title,icon:a.markerConfig.icon}),a.infoWindowConfig.html&&(t.map.myInfoWindow=new google.maps.InfoWindow({content:a.infoWindowConfig.html,maxWidth:a.infoWindowConfig.maxWidth}),google.maps.event.addListener(t.map.myMarker,"click",function(){t.map.myInfoWindow.open(t.map,t.map.myMarker)}),a.infoWindowConfig.autoShow&&t.map.myInfoWindow.open(t.map,t.map.myMarker)),google.maps.event.addListenerOnce(t.map,"tilesloaded",function(){e(".sm_loading").fadeOut(a.transSpeed,function(){e("#"+a.mapElementId).animate({opacity:0,opacity:1},a.transSpeed)})})}i==google.maps.GeocoderStatus.OK&&(t.address=s[0].geometry.location,t.appendOverlay(),o())})},appendOverlay:function(){this.settings.useOverlay&&(e("body").append('<div class="sm_gMapOverlay"><div class="sm_gMapWrapper"><span class="sm_closeMap">'+this.settings.overlayCloseText+'</span><div class="sm_gMapPanel"><span class="sm_loading" /></div></div></div>'),e(".sm_gMapPanel").append('<div id="'+this.settings.mapElementId+'" class="sm_map_canvas" />'),e(".sm_gMapOverlay").fadeIn(this.settings.transSpeed))},closeMap:function(){var t=this,n=t.settings;e(".sm_gMapPanel").fadeOut(n.transSpeed).promise().done(function(){e(this).remove(),e(".sm_gMapOverlay").fadeOut(n.transSpeed,function(){e(this).remove()})})},bindEvents:function(){var t=this,n=t.settings;this.$element.on("click."+t._name,function(){e("#"+n.mapElementId).html('<span class="sm_loading" />'),e(this).data("sm_address")&&(n.theAddress=e(this).data("sm_address")),t._defaults.isApiLoaded?t.geoCodeAddr.call(t):t.loadMapApi.call(t)}),e("body").on("click",".sm_closeMap",function(){t.closeMap.call(t)})},unbindEvents:function(){this.$element.off("."+this._name)},destroy:function(){this.unbindEvents(),this.$element.removeData()}}),e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new i(this,t))})},e.fn.simpleMap.defaults={isApiLoaded:!1,googleApiKey:"",autoLoad:!1,useOverlay:!1,overlayCloseText:"Close",transSpeed:220,mapElementId:"sm_panel",theAddress:"Toledo, Ohio",latitude:null,longitude:null,markerConfig:{title:null,icon:null},infoWindowConfig:{autoShow:!1,maxWidth:240,html:null},mapSetup:{scrollwheel:!0,streetViewControl:!1,panControl:!1,zoom:10,zoomControlOptions:{}}}}(jQuery,window,document);